# Automatically enter the Nix development shell when entering this directory
# Requires direnv (https://direnv.net/) to be installed and configured

# Use the default development shell from flake.nix
use flake

# Alternative: Use a specific development shell
# use flake .#minimal
# use flake .#testing

# Watch additional files for changes
watch_file flake.nix
watch_file go.mod
watch_file go.sum

# Set project-specific environment variables
export PROJECT_NAME="go-matter-server"
export MATTER_SERVER_DEV=1

# Create storage directory if it doesn't exist
mkdir -p .matter_server

# Add project bin to PATH for locally built binaries
PATH_add ./bin

# Optional: Set default configuration for development
# export MATTER_LOG_LEVEL=debug
# export MATTER_SERVER_PORT=5580